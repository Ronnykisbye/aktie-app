<!DOCTYPE html>
<html lang="da">
<head>
<!-- =========================================================
     AFSNIT 01 â€“ HEAD / META / PWA
     ========================================================= -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- PWA support (standard â€“ uden deprecated Apple-tag) -->
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="theme-color" content="#0a5ea8" />

  <!-- Title -->
  <title>Aktie App</title>

  <!-- Icons -->
  <link rel="icon" type="image/png" href="/aktie-app/icon-192.png" />
  <link rel="apple-touch-icon" href="/aktie-app/icon-192.png" />

  <!-- Manifest -->
  <link rel="manifest" href="/aktie-app/manifest.json" />

  <!-- Styles -->
  <link rel="stylesheet" href="css/app.css" />
</head>

<body>
  <!-- =========================================================
       AFSNIT 02 â€“ TOPBAR
       ========================================================= -->
  <header class="topbar">
    <div class="brand">
      <span class="brand-icon">ðŸ“ˆ</span>
      <span class="brand-title">Udvikling siden 10/09/2025 (DKK & %)</span>
    </div>

    <div class="topbar-actions">
      <button id="themeToggle" class="icon-btn" aria-label="Skift tema">
        <span id="themeIcon">ðŸŒ™</span>
      </button>
    </div>
  </header>

  <!-- =========================================================
       AFSNIT 03 â€“ INTRO + KNAPPER
       ========================================================= -->
  <main class="container">
    <p class="lead">Tryk pÃ¥ <b>Opdater</b> for at hente de nyeste kurser.</p>

    <div class="actions">
      <button id="btnUpdate" class="btn primary">
        <span class="btn-icon">ðŸ”„</span>
        Opdater
      </button>

      <button id="btnPdf" class="btn ghost">
        <span class="btn-icon">ðŸ“„</span>
        PDF
      </button>
    </div>

    <!-- =========================================================
         AFSNIT 04 â€“ STATUSLINJE
         ========================================================= -->
    <div id="statusLine" class="statusline">
      IndlÃ¦serâ€¦
    </div>

    <!-- =========================================================
         AFSNIT 05 â€“ APP CONTENT (renderes af JS)
         ========================================================= -->
    <section id="app"></section>
  </main>

  <!-- =========================================================
       AFSNIT 06 â€“ Scripts (ESM)
       ========================================================= -->
  <script type="module" src="js/main.js"></script>

  <!-- =========================================================
       AFSNIT 07 â€“ Print / PDF helper
       ========================================================= -->
  <script>
    // PDF-knap: browser print-dialog
    const btnPdf = document.getElementById('btnPdf');
    if (btnPdf) {
      btnPdf.addEventListener('click', () => window.print());
    }
  </script>

  <!-- =========================================================
       AFSNIT 08 â€“ Theme toggle (light/dark)
       ========================================================= -->
  <script>
    const root = document.documentElement;
    const btn = document.getElementById('themeToggle');
    const icon = document.getElementById('themeIcon');

    function setTheme(theme) {
      root.setAttribute('data-theme', theme);
      localStorage.setItem('theme', theme);
      if (icon) icon.textContent = theme === 'dark' ? 'â˜€ï¸' : 'ðŸŒ™';
    }

    const saved = localStorage.getItem('theme') || 'light';
    setTheme(saved);

    if (btn) {
      btn.addEventListener('click', () => {
        const current = root.getAttribute('data-theme') || 'light';
        setTheme(current === 'dark' ? 'light' : 'dark');
      });
    }
  </script>

  <!-- =========================================================
       AFSNIT 09 â€“ Service Worker (vigtigt for install + offline)
       ========================================================= -->
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/aktie-app/service-worker.js')
        .then(() => console.log('âœ… Service Worker registreret'))
        .catch(err => console.warn('SW fejl:', err));
    }
  </script>
</body>
</html>
